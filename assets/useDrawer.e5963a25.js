var e=Object.assign;import{D as t}from"./index.b30aa603.js";import{j as s,aq as o,e as l,g as a,k as n,r,o as i,m as c,H as u,aw as d,q as p,F as f,G as g,p as w,J as b,d0 as h,n as C,bq as k,v,cI as m,an as D,as as x,ao as y,y as $,ar as O,cX as B,A as P,cN as T,R as _,bD as F,at as j,D as S,au as L,w as H,ap as V,d1 as A,aj as N,cW as q}from"./index.74f7b770.js";import{A as I}from"./ArrowLeftOutlined.e7833055.js";const{t:R}=s(),M={confirmLoading:o.bool,showCancelBtn:o.bool.def(!0),cancelButtonProps:Object,cancelText:o.string.def(R("common.cancelText")),showOkBtn:o.bool.def(!0),okButtonProps:Object,okText:o.string.def(R("common.okText")),okType:o.string.def("primary"),showFooter:o.bool,footerHeight:{type:[String,Number],default:60}},W=e({isDetail:o.bool,title:o.string.def(""),loadingText:o.string,showDetailBack:o.bool.def(!0),visible:o.bool,loading:o.bool,maskClosable:o.bool.def(!0),getContainer:{type:[Object,String]},scrollOptions:{type:Object,default:null},closeFunc:{type:[Function,Object],default:null},triggerWindowResize:o.bool,destroyOnClose:o.bool},M);var z=l({name:"BasicDrawerFooter",props:e(e({},M),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:t}){const{prefixCls:s}=a("basic-drawer-footer");return{handleOk:function(){t("ok")},prefixCls:s,handleClose:function(){t("close")},getStyle:n((()=>{const t=`${e.height}`;return{height:t,lineHeight:t}}))}}});z.render=function(e,t,s,o,l,a){const n=r("a-button");return e.showFooter||e.$slots.footer?(i(),c("div",{key:0,class:e.prefixCls,style:e.getStyle},[e.$slots.footer?d(e.$slots,"footer",{key:1}):(i(),c(u,{key:0},[d(e.$slots,"insertFooter"),e.showCancelBtn?(i(),c(n,p({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:f((()=>[g(w(e.cancelText),1)])),_:1},16,["onClick"])):b("",!0),d(e.$slots,"centerFooter"),e.showOkBtn?(i(),c(n,p({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:f((()=>[g(w(e.okText),1)])),_:1},16,["type","onClick","loading"])):b("",!0),d(e.$slots,"appendFooter")],64))],6)):b("",!0)};var G=l({name:"BasicDrawerHeader",components:{BasicTitle:h,ArrowLeftOutlined:I},props:{isDetail:o.bool,showDetailBack:o.bool,title:o.string},emits:["close"],setup(e,{emit:t}){const{prefixCls:s}=a("basic-drawer-header");return{prefixCls:s,handleClose:function(){t("close")}}}});const J={key:1};G.render=function(e,t,s,o,l,a){const n=r("BasicTitle"),u=r("ArrowLeftOutlined");return e.isDetail?(i(),c("div",{key:1,class:[e.prefixCls,`${e.prefixCls}--detail`]},[C("span",{class:`${e.prefixCls}__twrap`},[e.showDetailBack?(i(),c("span",{key:0,onClick:t[1]||(t[1]=(...t)=>e.handleClose&&e.handleClose(...t))},[C(u,{class:`${e.prefixCls}__back`},null,8,["class"])])):b("",!0),e.title?(i(),c("span",J,w(e.title),1)):b("",!0)],2),C("span",{class:`${e.prefixCls}__toolbar`},[d(e.$slots,"titleToolbar")],2)],2)):(i(),c(n,{key:0,class:e.prefixCls},{default:f((()=>[d(e.$slots,"title"),g(" "+w(e.$slots.title?"":e.title),1)])),_:3},8,["class"]))};var X=l({components:{Drawer:t,ScrollContainer:k,DrawerFooter:z,DrawerHeader:G},inheritAttrs:!1,props:W,emits:["visible-change","ok","close","register"],setup(t,{emit:o}){const l=v(!1),r=m(),i=v(null),{t:c}=s(),{prefixVar:u,prefixCls:d}=a("basic-drawer"),p={setDrawerProps:function(e){i.value=B($(i)||{},e),Reflect.has(e,"visible")&&(l.value=!!e.visible)},emitVisible:void 0},f=y();f&&o("register",p,f.uid);const g=n((()=>B(P(t),$(i)))),w=n((()=>{const t=e(e(e({placement:"right"},$(r)),$(g)),{visible:$(l)});t.title=void 0;const{isDetail:s,width:o,wrapClassName:a,getContainer:n}=t;if(s){o||(t.width="100%");const e=`${d}__detail`;t.wrapClassName=a?`${a} ${e}`:e,n||(t.getContainer=`.${u}-layout-content`)}return t})),b=n((()=>e(e({},r),$(w)))),h=n((()=>{const{footerHeight:e,showFooter:t}=$(w);return t&&e?T(e)?`${e}px`:`${e.replace("px","")}px`:"0px"})),C=n((()=>({position:"relative",height:`calc(100% - ${$(h)})`}))),k=n((()=>{var e;return!!(null==(e=$(w))?void 0:e.loading)}));return D((()=>{l.value=t.visible})),x((()=>l.value),(e=>{_((()=>{var t;o("visible-change",e),f&&(null==(t=p.emitVisible)||t.call(p,e,f.uid))}))})),{onClose:async function(e){const{closeFunc:t}=$(w);if(o("close",e),t&&O(t)){const e=await t();l.value=!e}else l.value=!1},t:c,prefixCls:d,getMergeProps:g,getScrollContentStyle:C,getProps:w,getLoading:k,getBindValues:b,getFooterHeight:h,handleOk:function(){o("ok")}}}});X.render=function(e,t,s,o,l,a){const n=r("DrawerHeader"),u=r("ScrollContainer"),g=r("DrawerFooter"),w=r("Drawer"),b=F("loading");return i(),c(w,p({class:e.prefixCls,onClose:e.onClose},e.getBindValues),j({default:f((()=>[S(C(u,{style:e.getScrollContentStyle,"loading-tip":e.loadingText||e.t("common.loadingText")},{default:f((()=>[d(e.$slots,"default")])),_:3},8,["style","loading-tip"]),[[b,e.getLoading]]),C(g,p(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),j({_:2},[L(Object.keys(e.$slots),(t=>({name:t,fn:f((s=>[d(e.$slots,t,s)]))})))]),1040,["onClose","onOk","height"])])),_:2},[e.$slots.title?void 0:{name:"title",fn:f((()=>[C(n,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:f((()=>[d(e.$slots,"titleToolbar")])),_:1},8,["title","isDetail","showDetailBack","onClose"])]))}]),1040,["class","onClose"])};const E=H({}),K=H({});function Q(){const e=v(null),t=v(!1),s=v("");const o=()=>{const t=$(e);return t||q("useDrawer instance is undefined!"),t};return[function(o,l){V((()=>{e.value=null,t.value=null,E[$(s)]=null})),$(t)&&A()&&o===$(e)||(s.value=l,e.value=o,t.value=!0,o.emitVisible=(e,t)=>{K[t]=e})},{setDrawerProps:e=>{var t;null==(t=o())||t.setDrawerProps(e)},getVisible:n((()=>K[~~$(s)])),openDrawer:(e=!0,t,l=!0)=>{var a;if(null==(a=o())||a.setDrawerProps({visible:e}),!t)return;if(l)return E[$(s)]=null,void(E[$(s)]=P(t));N(P(E[$(s)]),P(t))||(E[$(s)]=P(t))}}]}const U=e=>{const t=v(null),s=y(),o=v("");s||q("useDrawerInner instance is undefined!");const l=()=>{const e=$(t);if(e)return e;q("useDrawerInner instance is undefined!")};return D((()=>{const t=E[$(o)];t&&e&&O(e)&&_((()=>{e(t)}))})),[(e,l)=>{V((()=>{t.value=null})),o.value=l,t.value=e,null==s||s.emit("register",e,l)},{changeLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({loading:e})},changeOkLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({confirmLoading:e})},getVisible:n((()=>K[~~$(o)])),closeDrawer:()=>{var e;null==(e=l())||e.setDrawerProps({visible:!1})},setDrawerProps:e=>{var t;null==(t=l())||t.setDrawerProps(e)}}]};export{X as _,U as a,Q as u};
