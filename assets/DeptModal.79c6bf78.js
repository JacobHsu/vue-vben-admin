var e=Object.assign;import{_ as t,a}from"./useModal.9b34011e.js";import{_ as o}from"./BasicForm.5cd32a05.js";import{u as r}from"./useForm.27307ca0.js";import{T as s}from"./index.04c03400.js";import{dh as n,e as l,v as i,k as d,y as c,r as m,o as p,m as u,F as f,n as b,q as g}from"./index.74f7b770.js";import{a as v}from"./system.1d84e352.js";const h=[{title:"部门名称",dataIndex:"deptName",width:160,align:"left"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=0==~~e.status,a=t?"启用":"停用";return n(s,{color:t?"green":"red"},(()=>a))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],F=[{field:"deptName",label:"部门名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],x=[{field:"deptName",label:"部门名称",component:"Input",required:!0},{field:"parentDept",label:"上级部门",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body},required:!0},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var y=l({name:"DeptModal",components:{BasicModal:t,BasicForm:o},emits:["success","register"],setup(t,{emit:o}){const s=i(!0),[n,{resetFields:l,setFieldsValue:m,updateSchema:p,validate:u}]=r({labelWidth:100,schemas:x,showActionButtonGroup:!1}),[f,{setModalProps:b,closeModal:g}]=a((async t=>{l(),b({confirmLoading:!1}),s.value=!!(null==t?void 0:t.isUpdate),c(s)&&m(e({},t.record));const a=await v();p({field:"parentDept",componentProps:{treeData:a}})}));return{registerModal:f,registerForm:n,getTitle:d((()=>c(s)?"编辑部门":"新增部门")),handleSubmit:async function(){try{await u();b({confirmLoading:!0}),g(),o("success")}finally{b({confirmLoading:!1})}}}}});y.render=function(e,t,a,o,r,s){const n=m("BasicForm"),l=m("BasicModal");return p(),u(l,g(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:f((()=>[b(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var I=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:y});export{I as D,y as _,h as c,F as s};
