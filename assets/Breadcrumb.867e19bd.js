var e=Object.assign;import{B as t}from"./index.b76b32b4.js";import{e as a,aW as n,aq as r,v as l,a$ as u,g as i,j as o,an as s,bs as c,ax as d,b1 as m,bn as h,aZ as v,dZ as f,aO as p,r as b,o as g,m as C,n as k,F as x,J as y,p as B,G as j}from"./index.74f7b770.js";import"./vendor.62a151c9.js";var I=a({name:"LayoutBreadcrumb",components:{Icon:n,[t.name]:t},props:{theme:r.oneOf(["dark","light"])},setup(){const t=l([]),{currentRoute:a}=u(),{prefixCls:n}=i("layout-breadcrumb"),{getShowBreadCrumbIcon:r}=c(),{t:b}=o();function g(t,a){const n=[];return t.forEach((t=>{var r,l;a.includes(t.path)&&n.push(e(e({},t),{name:(null==(r=t.meta)?void 0:r.title)||t.name})),(null==(l=t.children)?void 0:l.length)&&n.push(...g(t.children,a))})),n}return s((async()=>{var n,r,l;if(a.value.name===m)return;const u=await h(),i=a.value.matched,o=null==i?void 0:i[i.length-1];let s=a.value.path;o&&(null==(n=null==o?void 0:o.meta)?void 0:n.currentActiveMenu)&&(s=o.meta.currentActiveMenu);const c=v(u,s),d=g(u.filter((e=>e.path===c[0])),c);if(!d||0===d.length)return;const p=f(d,(e=>{const{meta:t,name:a}=e;if(!t)return!!a;const{title:n,hideBreadcrumb:r,hideMenu:l}=t;return!(!n||r||l)})).filter((e=>{var t,a;return!(null==(t=e.meta)?void 0:t.hideBreadcrumb)||!(null==(a=e.meta)?void 0:a.hideMenu)}));(null==(r=a.value.meta)?void 0:r.currentActiveMenu)&&p.push(e(e({},a.value),{name:(null==(l=a.value.meta)?void 0:l.title)||a.value.name})),t.value=p})),{routes:t,t:b,prefixCls:n,getShowBreadCrumbIcon:r,handleClick:function(e,t,a){null==a||a.preventDefault();const{children:n,redirect:r,meta:l}=e;if((null==n?void 0:n.length)&&!r)return void(null==a||a.stopPropagation());if(null==l?void 0:l.carryParam)return;const u=p();if(r&&d(r))u(r);else{let e="";if(1===t.length)e=t[0];else{e=`${t.slice(1).pop()||""}`}e=/^\//.test(e)?e:`/${e}`,u(e)}},hasRedirect:function(e,t){return e.indexOf(t)!==e.length-1}}}});const M={key:1};I.render=function(e,t,a,n,r,l){const u=b("Icon"),i=b("router-link"),o=b("a-breadcrumb");return g(),C("div",{class:[e.prefixCls,`${e.prefixCls}--${e.theme}`]},[k(o,{routes:e.routes},{itemRender:x((({route:t,routes:a,paths:n})=>[e.getShowBreadCrumbIcon&&t.meta.icon?(g(),C(u,{key:0,icon:t.meta.icon},null,8,["icon"])):y("",!0),e.hasRedirect(a,t)?(g(),C(i,{key:2,to:"",onClick:a=>e.handleClick(t,n,a)},{default:x((()=>[j(B(e.t(t.name||t.meta.title)),1)])),_:2},1032,["onClick"])):(g(),C("span",M,B(e.t(t.name||t.meta.title)),1))])),_:1},8,["routes"])],2)};export default I;
