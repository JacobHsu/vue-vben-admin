var e=Object.assign;import{n as t,q as n,I as r,e as c,ai as a,dW as l,N as o,U as s,X as i,ah as d,ac as u,S as h,a6 as f,W as p,T as y,L as b,bW as v,aQ as m,ax as g,dh as k,aW as O,d0 as K,cv as x,aX as S,s as w,aq as A,j,k as E,bE as C,r as L,o as T,m as _,F as P,G as N,p as D,J as I,b7 as B,H as $,au as M,y as H,a5 as U,dX as R,w as F,v as z,g as V,A as X,cu as Y,ar as q,an as W,as as Z,D as G,E as J,bq as Q,cZ as ee,dY as te,dZ as ne,cO as re,be as ce}from"./index.74f7b770.js";import{T as ae}from"./Tree.02df3d3d.js";import{T as le,F as oe,a as se,n as ie,d as de}from"./util.a2f3b017.js";import{C as ue}from"./CaretDownFilled.0f40e810.js";import{u as he}from"./useContextMenu.c6b15439.js";import{u as fe}from"./useExpose.c23851db.js";import{g as pe}from"./get.e5a8e3ec.js";var ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(e,c){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){be(e,t,n[t])}))}return e}({},e,c.attrs);return t(r,n(a,{icon:ye}),null)};ve.displayName="MinusSquareOutlined",ve.inheritAttrs=!1;var me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(e,c){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ge(e,t,n[t])}))}return e}({},e,c.attrs);return t(r,n(a,{icon:me}),null)};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}ke.displayName="PlusSquareOutlined",ke.inheritAttrs=!1,ae.TreeNode=le;var we=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n},Ae=ae.TreeNode;function je(){return{showLine:o.looseBool,multiple:o.looseBool,autoExpandParent:o.looseBool,checkStrictly:o.looseBool,checkable:o.looseBool,disabled:o.looseBool,defaultExpandAll:o.looseBool,defaultExpandParent:o.looseBool,defaultExpandedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),expandedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),checkedKeys:o.oneOfType([o.arrayOf(o.oneOfType([o.string,o.number])),o.shape({checked:o.arrayOf(o.oneOfType([o.string,o.number])),halfChecked:o.arrayOf(o.oneOfType([o.string,o.number]))}).loose]),defaultCheckedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),selectedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),defaultSelectedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),selectable:o.looseBool,filterAntTreeNode:o.func,loadData:o.func,loadedKeys:o.arrayOf(o.oneOfType([o.string,o.number])),draggable:o.looseBool,showIcon:o.looseBool,icon:o.func,switcherIcon:o.any,prefixCls:o.string,filterTreeNode:o.func,openAnimation:o.any,treeData:{type:Array},replaceFields:o.object,blockNode:o.looseBool,onExpand:o.func,onCheck:o.func,onSelect:o.func,onClick:o.func,onDoubleclick:o.func,onDblclick:o.func,"onUpdate:selectedKeys":o.func,"onUpdate:checkedKeys":o.func,"onUpdate:expandedKeys":o.func}}var Ee=c({name:"ATree",inheritAttrs:!1,props:a(je(),{checkable:!1,showIcon:!1,openAnimation:Se(Se({},l),{appear:null}),blockNode:!1}),setup:function(){return{tree:null,configProvider:s("configProvider",i)}},TreeNode:Ae,methods:{renderSwitcherIcon:function(e,n,r){var c=r.isLeaf,a=r.loading,l=r.expanded,o=this.$props.showLine;if(a)return t(d,{class:"".concat(e,"-switcher-loading-icon")},null);if(c)return o?t(oe,{class:"".concat(e,"-switcher-line-icon")},null):null;var s="".concat(e,"-switcher-icon");return n?u(n,{class:s}):o?t(l?ve:ke,{class:"".concat(e,"-switcher-line-icon")},null):t(ue,{class:s},null)},updateTreeData:function(e){var t=this,n=this.$slots,r=Se(Se({},{children:"children",title:"title",key:"key"}),this.$props.replaceFields);return e.map((function(e){var c=e[r.key],a=e[r.children],l=e.slots,o=void 0===l?{}:l,s=e.class,i=e.style,d=we(e,["slots","class","style"]),u=Se(Se({},d),{icon:n[o.icon]||d.icon,switcherIcon:n[o.switcherIcon]||d.switcherIcon,title:n[o.title]||n.title||d[r.title],dataRef:e,key:c,class:s,style:i});return a?Se(Se({},u),{children:t.updateTreeData(a)}):u}))},setTreeRef:function(e){this.tree=e},handleCheck:function(e,t){this.$emit("update:checkedKeys",e),this.$emit("check",e,t)},handleExpand:function(e,t){this.$emit("update:expandedKeys",e),this.$emit("expand",e,t)},handleSelect:function(e,t){this.$emit("update:selectedKeys",e),this.$emit("select",e,t)}},render:function(){var e,n=this,r=h(this),c=r.prefixCls,a=r.showIcon,l=r.treeNodes,o=r.blockNode,s=(0,this.configProvider.getPrefixCls)("tree",c),i=f(this,"switcherIcon"),d=r.checkable,u=r.treeData||l;u&&(u=this.updateTreeData(u));var b=this.$attrs,v=b.class,m=we(b,["class"]),g=Se(Se(Se(Se({},r),{prefixCls:s,checkable:d?t("span",{class:"".concat(s,"-checkbox-inner")},null):d,children:p(this),switcherIcon:function(e){return n.renderSwitcherIcon(s,i,e)},ref:this.setTreeRef}),m),{class:y(v,(e={},xe(e,"".concat(s,"-icon-hide"),!a),xe(e,"".concat(s,"-block-node"),o),e)),onCheck:this.handleCheck,onExpand:this.handleExpand,onSelect:this.handleSelect});return u&&(g.treeData=u),t(ae,Ke(Ke({},g),{},{__propsSymbol__:[]}),null)}}),Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(e,c){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Le(e,t,n[t])}))}return e}({},e,c.attrs);return t(r,n(a,{icon:Ce}),null)};Te.displayName="FolderOpenOutlined",Te.inheritAttrs=!1;var _e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne,De,Ie=function(e,c){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pe(e,t,n[t])}))}return e}({},e,c.attrs);return t(r,n(a,{icon:_e}),null)};function Be(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){(ie(e)||[]).forEach((function(e){var n=e.key,r=p(e);!1!==t(n,e)&&Me(r,t)}))}function He(e,t,n,r){var c=[],a=Ne.None;if(n&&n===r)return[n];if(!n||!r)return[];return Me(e,(function(e){if(a===Ne.End)return!1;if(function(e){return e===n||e===r}(e)){if(c.push(e),a===Ne.None)a=Ne.Start;else if(a===Ne.Start)return a=Ne.End,!1}else a===Ne.Start&&c.push(e);return-1!==t.indexOf(e)})),c}function Ue(e,t){var n=Be(t),r=[];return Me(e,(function(e,t){var c=n.indexOf(e);return-1!==c&&(r.push(t),n.splice(c,1)),!!n.length})),r}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=t(e||[]).forEach((function(e){n.push(e[a]),e[o]&&(n=[].concat(Be(n),Be(Re(e[o],t))))})),c=r.key,a=void 0===c?"key":c,l=r.children,o=void 0===l?"children":l;return n}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e){return function(e){if(Array.isArray(e))return Xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Ie.displayName="FolderOutlined",Ie.inheritAttrs=!1,(De=Ne||(Ne={}))[De.None=0]="None",De[De.Start=1]="Start",De[De.End=2]="End";var qe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n};function We(e){var n=e.isLeaf,r=e.expanded;return t(n?oe:r?Te:Ie,null,null)}var Ze=c({name:"ADirectoryTree",mixins:[b],inheritAttrs:!1,props:a(Ye(Ye({},je()),{expandAction:o.oneOf([!1,"click","doubleclick","dblclick"])}),{showIcon:!0,expandAction:"click"}),setup:function(){return{children:null,onDebounceExpand:null,tree:null,lastSelectedKey:"",cachedSelectedKeys:[],configProvider:s("configProvider",i)}},data:function(){var e=h(this),t=e.defaultExpandAll,n=e.defaultExpandParent,r=e.expandedKeys,c=e.defaultExpandedKeys,a=p(this),l=se(a).keyEntities,o={};return o._selectedKeys=e.selectedKeys||e.defaultSelectedKeys||[],t?e.treeData?o._expandedKeys=Re(e.treeData,e.replaceFields):o._expandedKeys=function(e){return Be(se(e).keyEntities.keys())}(a):o._expandedKeys=n?de(r||c,l):r||c,Ye({_selectedKeys:[],_expandedKeys:[]},o)},watch:{expandedKeys:function(e){this.setState({_expandedKeys:e})},selectedKeys:function(e){this.setState({_selectedKeys:e})}},created:function(){this.onDebounceExpand=v(this.expandFolderNode,200,{leading:!0})},methods:{handleExpand:function(e,t){this.setUncontrolledState({_expandedKeys:e}),this.$emit("update:expandedKeys",e),this.$emit("expand",e,t)},handleClick:function(e,t){"click"===this.$props.expandAction&&this.onDebounceExpand(e,t),this.$emit("click",e,t)},handleDoubleClick:function(e,t){var n=this.$props.expandAction;"dblclick"!==n&&"doubleclick"!==n||this.onDebounceExpand(e,t),this.$emit("doubleclick",e,t),this.$emit("dblclick",e,t)},hanldeSelect:function(e,t){var n,r=this.$props.multiple,c=this.children||[],a=this.$data._expandedKeys,l=void 0===a?[]:a,o=t.node,s=t.nativeEvent,i=o.eventKey,d=void 0===i?"":i,u={},h=Ye(Ye({},t),{selected:!0}),f=s.ctrlKey||s.metaKey,p=s.shiftKey;r&&f?(n=e,this.lastSelectedKey=d,this.cachedSelectedKeys=n,h.selectedNodes=Ue(c,n)):r&&p?(n=Array.from(new Set([].concat(Ve(this.cachedSelectedKeys||[]),Ve(He(c,l,d,this.lastSelectedKey))))),h.selectedNodes=Ue(c,n)):(n=[d],this.lastSelectedKey=d,this.cachedSelectedKeys=n,h.selectedNodes=[t.node]),u._selectedKeys=n,this.$emit("update:selectedKeys",n),this.$emit("select",n,h),this.setUncontrolledState(u)},setTreeRef:function(e){this.tree=e},expandFolderNode:function(e,t){t.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey||this.tree.tree&&this.tree.tree.onNodeExpand(e,t)},setUncontrolledState:function(e){var t=m(e,Object.keys(h(this)).map((function(e){return"_".concat(e)})));Object.keys(t).length&&this.setState(t)},handleCheck:function(e,t){this.$emit("update:checkedKeys",e),this.$emit("check",e,t)}},render:function(){var e=this;this.children=p(this);var n=h(this),r=n.prefixCls,c=qe(n,["prefixCls"]),a=(0,this.configProvider.getPrefixCls)("tree",r),l=this.$data,o=l._expandedKeys,s=l._selectedKeys,i=this.$attrs,d=i.class,u=qe(i,["class"]),b=y("".concat(a,"-directory"),d),v=Ye(Ye(Ye({icon:We},u),m(c,["onUpdate:selectedKeys","onUpdate:checkedKeys","onUpdate:expandedKeys"])),{prefixCls:a,expandedKeys:o,selectedKeys:s,switcherIcon:f(this,"switcherIcon"),ref:this.setTreeRef,class:b,onSelect:this.hanldeSelect,onClick:this.handleClick,onDblclick:this.handleDoubleClick,onExpand:this.handleExpand,onCheck:this.handleCheck});return t(Ee,v,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({default:function(){return[e.children]}},m(this.$slots,["default"])))}});Ee.TreeNode.name="ATreeNode",Ee.DirectoryTree=Ze,Ee.install=function(e){return e.component(Ee.name,Ee),e.component(Ee.TreeNode.name,Ee.TreeNode),e.component(Ze.name,Ze),e};const Ge=({icon:e})=>e?g(e)?k(O,{icon:e,class:"mr-1"}):O:null;var Je,Qe;(Qe=Je||(Je={}))[Qe.SELECT_ALL=0]="SELECT_ALL",Qe[Qe.UN_SELECT_ALL=1]="UN_SELECT_ALL",Qe[Qe.EXPAND_ALL=2]="EXPAND_ALL",Qe[Qe.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",Qe[Qe.CHECK_STRICTLY=4]="CHECK_STRICTLY",Qe[Qe.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY";var et=c({name:"BasicTreeHeader",components:{BasicTitle:K,Icon:O,Dropdown:x,Menu:S,MenuItem:S.Item,MenuDivider:S.Divider,InputSearch:w.Search},props:{helpMessage:{type:[String,Array],default:""},title:A.string,toolbar:A.bool,checkable:A.bool,search:A.bool,checkAll:A.func,expandAll:A.func},emits:["strictly-change","search"],setup(e,{emit:t}){const{t:n}=j(),r=E((()=>{const{checkable:t}=e,r=[{label:n("component.tree.expandAll"),value:Je.EXPAND_ALL},{label:n("component.tree.unExpandAll"),value:Je.UN_EXPAND_ALL,divider:t}];return t?[{label:n("component.tree.selectAll"),value:Je.SELECT_ALL},{label:n("component.tree.unSelectAll"),value:Je.UN_SELECT_ALL,divider:t},...r,{label:n("component.tree.checkStrictly"),value:Je.CHECK_STRICTLY},{label:n("component.tree.checkUnStrictly"),value:Je.CHE}]:r}));const[c]=C((function(e){t("search",e)}),200);return{t:n,toolbarList:r,handleMenuClick:function(n){var r,c,a,l;const{key:o}=n;switch(o){case Je.SELECT_ALL:null==(r=e.checkAll)||r.call(e,!0);break;case Je.UN_SELECT_ALL:null==(c=e.checkAll)||c.call(e,!1);break;case Je.EXPAND_ALL:null==(a=e.expandAll)||a.call(e,!0);break;case Je.UN_EXPAND_ALL:null==(l=e.expandAll)||l.call(e,!1);break;case Je.CHECK_STRICTLY:t("strictly-change",!1);break;case Je.CHECK_UN_STRICTLY:t("strictly-change",!0)}},handleSearch:function(e){c(e.target.value)}}}});const tt={class:"flex px-2 py-1.5 items-center border-b-1"},nt={key:1,class:"flex flex-1 justify-end items-center cursor-pointer"},rt={key:0,class:"mr-1 w-2/3"};et.render=function(e,n,r,c,a,l){const o=L("BasicTitle"),s=L("InputSearch"),i=L("Icon"),d=L("MenuItem"),u=L("MenuDivider"),h=L("Menu"),f=L("Dropdown");return T(),_("div",tt,[e.title?(T(),_(o,{key:0,helpMessage:e.helpMessage},{default:P((()=>[N(D(e.title),1)])),_:1},8,["helpMessage"])):I("",!0),e.search||e.toolbar?(T(),_("div",nt,[e.search?(T(),_("div",rt,[t(s,{placeholder:e.t("common.searchText"),size:"small",onChange:e.handleSearch},null,8,["placeholder","onChange"])])):I("",!0),e.toolbar?(T(),_(f,{key:1,onClick:n[1]||(n[1]=B((()=>{}),["prevent"]))},{overlay:P((()=>[t(h,{onClick:e.handleMenuClick},{default:P((()=>[(T(!0),_($,null,M(e.toolbarList,(e=>(T(),_($,{key:e.value},[t(d,{key:e.value},{default:P((()=>[N(D(e.label),1)])),_:2},1040),e.divider?(T(),_(u,{key:0})):I("",!0)],64)))),128))])),_:1},8,["onClick"])])),default:P((()=>[t(i,{icon:"ion:ellipsis-vertical"})])),_:1})):I("",!0)])):I("",!0)])};var ct=c({name:"BasicTree",inheritAttrs:!1,props:{value:{type:Array},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:A.string,toolbar:A.bool,search:A.bool,checkStrictly:A.bool,clickRowToExpand:A.bool.def(!0),checkable:A.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value","change"],setup(r,{attrs:c,slots:a,emit:l}){const o=F({checkStrictly:r.checkStrictly,expandedKeys:r.expandedKeys||[],selectedKeys:r.selectedKeys||[],checkedKeys:r.checkedKeys||[]}),s=F({startSearch:!1,searchData:[]}),i=z([]),[d]=he(),{prefixCls:u}=V("basic-tree"),h=E((()=>{const{replaceFields:t}=r;return e({children:"children",title:"title",key:"key"},t)})),f=E((()=>{let t=e(e(e({blockNode:!0},c),r),{expandedKeys:o.expandedKeys,selectedKeys:o.selectedKeys,checkedKeys:o.checkedKeys,checkStrictly:o.checkStrictly,replaceFields:H(h),"onUpdate:expandedKeys":e=>{o.expandedKeys=e,l("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{o.selectedKeys=e,l("update:selectedKeys",e)},onCheck:e=>{o.checkedKeys=e;const t=X(e);l("change",t),l("update:value",t)},onRightClick:O});return t=Y(t,"treeData","class"),t})),p=E((()=>s.startSearch?s.searchData:H(i))),y=E((()=>{var e;return s.startSearch&&0===(null==(e=s.searchData)?void 0:e.length)})),{deleteNodeByKey:b,insertNodeByKey:v,filterByLevel:m,updateNodeByKey:g,getAllKeys:k}=function(t,n){return{deleteNodeByKey:function e(r,c){if(!r)return;const a=c||H(t),{key:l,children:o}=H(n);if(o&&l)for(let t=0;t<a.length;t++){const n=a[t],c=n[o];if(n[l]===r){a.splice(t,1);break}c&&c.length&&e(r,n[o])}},insertNodeByKey:function({parentKey:e=null,node:r,push:c="push"}){const a=U(H(t));if(!e)return a[c](r),void(t.value=a);const{key:l,children:o}=H(n);o&&l&&(R(a,(t=>{t[l]===e&&(t[o]=t[o]||[],t[o][c](r))})),t.value=a)},filterByLevel:function e(r=1,c,a=1){if(!r)return[];const l=[],o=c||H(t)||[];for(let t=0;t<o.length;t++){const c=o[t],{key:s,children:i}=H(n),d=s?c[s]:"",u=i?c[i]:[];l.push(d),u&&u.length&&a<r&&(a+=1,l.push(...e(r,u,a)))}return l},updateNodeByKey:function r(c,a,l){if(!c)return;const o=l||H(t),{key:s,children:i}=H(n);if(i&&s)for(let t=0;t<o.length;t++){const n=o[t],l=n[i];if(n[s]===c){o[t]=e(e({},o[t]),a);break}l&&l.length&&r(c,a,n[i])}},getAllKeys:function e(r){const c=[],a=r||H(t),{key:l,children:o}=H(n);if(!o||!l)return c;for(let t=0;t<a.length;t++){const n=a[t];c.push(n[l]);const r=n[o];r&&r.length&&c.push(...e(r))}return c}}}(i,h);async function O({event:e,node:t}){const{rightMenuList:n=[],beforeRightClick:c}=r;let a=[];a=c&&q(c)?await c(t):n,a.length&&d({event:e,items:a})}function K(e){o.expandedKeys=e}function x(e){o.checkedKeys=e?k():[]}function S(e){o.expandedKeys=e?k():[]}function w(e){o.checkStrictly=e}function A(e){if(!e)return void(s.startSearch=!1);s.startSearch=!0;const{title:t}=H(h);s.searchData=ne(H(i),(n=>{var r,c;return null!=(c=null==(r=n[t])?void 0:r.includes(e))&&c}))}function j(e,t){if(r.clickRowToExpand&&t&&0!==t.length)if(o.expandedKeys.includes(e)){const t=[...o.expandedKeys],n=t.findIndex((t=>t===e));-1!==n&&t.splice(n,1),K(t)}else K([...o.expandedKeys,e])}W((()=>{i.value=r.treeData})),W((()=>{o.expandedKeys=r.expandedKeys})),W((()=>{o.selectedKeys=r.selectedKeys})),W((()=>{o.checkedKeys=r.checkedKeys})),Z((()=>r.value),(()=>{o.checkedKeys=X(r.value||[])})),W((()=>{o.checkStrictly=r.checkStrictly}));function C(e){const{actionList:n}=r;if(n&&0!==n.length)return n.map(((n,r)=>{var c;let a=!0;return q(n.show)?a=null==(c=n.show)?void 0:c.call(n,e):ce(n.show)&&(a=n.show),a?t("span",{key:r,class:`${u}__action`},[n.render(e)]):null}))}function L({data:c,level:l}){return c?c.map((c=>{const{title:o,key:s,children:i}=H(h),d=Y(c,"title"),f=function(e,t){return!t&&r.renderIcon&&q(r.renderIcon)?r.renderIcon(e):t}(e(e({},c),{level:l}),c.icon),p=pe(c,i)||[];return t(Ee.TreeNode,n(d,{node:X(c),key:pe(c,s)}),{title:()=>t("span",{class:`${u}-title pl-2`,onClick:j.bind(null,c[s],c[i])},[(null==a?void 0:a.title)?re(a,"title",c):t($,null,[f&&t(Ge,{icon:f},null),t("span",{class:`${u}__content`},[pe(c,o)]),t("span",{class:`${u}__actions`},[C(e(e({},c),{level:l}))])])]),default:()=>L({data:p,level:l+1})})})):null}return fe({setExpandedKeys:K,getExpandedKeys:function(){return o.expandedKeys},setSelectedKeys:function(e){o.selectedKeys=e},getSelectedKeys:function(){return o.selectedKeys},setCheckedKeys:function(e){o.checkedKeys=e},getCheckedKeys:function(){return o.checkedKeys},insertNodeByKey:v,deleteNodeByKey:b,updateNodeByKey:g,checkAll:x,expandAll:S,filterByLevel:e=>{o.expandedKeys=m(e)}}),()=>{const{title:l,helpMessage:o,toolbar:s,search:i,checkable:d}=r,h=l||s||i;return t("div",{class:[u,"h-full bg-white",c.class]},[h&&t(et,{checkable:d,checkAll:x,expandAll:S,title:l,search:i,toolbar:s,helpMessage:o,onStrictlyChange:w,onSearch:A},null),G(t(Q,{style:{height:"calc(100% - 38px)"}},{default:()=>[t(Ee,n(H(f),{showIcon:!1}),e({default:()=>L({data:H(p),level:1})},ee(a)))]}),[[J,!H(y)]]),G(t(te,{class:"!mt-4"},null),[[J,H(y)]])])}}});export{ct as _};
