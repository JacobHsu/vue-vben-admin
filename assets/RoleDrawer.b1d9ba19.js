var e=Object.assign;import{_ as t}from"./BasicForm.5cd32a05.js";import{u as a}from"./useForm.27307ca0.js";import{T as r}from"./index.04c03400.js";import{dh as o,e as s,v as l,k as n,y as i,r as d,o as u,m,F as c,n as p,q as f}from"./index.74f7b770.js";import{_ as b,a as g}from"./useDrawer.e5963a25.js";import{_ as v}from"./index.vue_vue&type=style&index=0&lang.a9a8c427.js";import{d as w}from"./system.1d84e352.js";const h=[{title:"角色名称",dataIndex:"roleName",width:200},{title:"角色值",dataIndex:"roleValue",width:180},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=0==~~e.status,a=t?"启用":"停用";return o(r,{color:t?"green":"red"},(()=>a))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],x=[{field:"roleNme",label:"角色名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],D=[{field:"roleName",label:"角色名称",required:!0,component:"Input"},{field:"roleValue",label:"角色值",required:!0,component:"Input"},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]}},{label:"备注",field:"remark",component:"InputTextArea"},{label:" ",field:"menu",slot:"menu",component:"Input"}];var F=s({name:"RoleDrawer",components:{BasicDrawer:b,BasicForm:t,BasicTree:v},emits:["success","register"],setup(t,{emit:r}){const o=l(!0),s=l([]),[d,{resetFields:u,setFieldsValue:m,validate:c}]=a({labelWidth:90,schemas:D,showActionButtonGroup:!1}),[p,{setDrawerProps:f,closeDrawer:b}]=g((async t=>{u(),f({confirmLoading:!1}),o.value=!!(null==t?void 0:t.isUpdate),i(o)&&m(e({},t.record)),s.value=await w()}));return{registerDrawer:p,registerForm:d,getTitle:n((()=>i(o)?"编辑角色":"新增角色")),handleSubmit:async function(){try{await c();f({confirmLoading:!0}),b(),r("success")}finally{f({confirmLoading:!1})}},treeData:s}}});F.render=function(e,t,a,r,o,s){const l=d("BasicTree"),n=d("BasicForm"),i=d("BasicDrawer");return u(),m(i,f(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:c((()=>[p(n,{onRegister:e.registerForm},{menu:c((({model:t,field:a})=>[p(l,{value:t[a],"onUpdate:value":e=>t[a]=e,treeData:e.treeData,replaceFields:{title:"menuName",key:"id"},checkable:"",toolbar:"",title:"菜单分配"},null,8,["value","onUpdate:value","treeData"])])),_:1},8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var I=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:F});export{I as R,F as _,h as c,x as s};
