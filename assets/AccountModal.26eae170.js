var e=Object.assign;import{_ as t,a}from"./useModal.9b34011e.js";import{_ as o}from"./BasicForm.5cd32a05.js";import{u as n}from"./useForm.27307ca0.js";import{b as i,a as l}from"./system.1d84e352.js";import{e as s,v as r,k as d,y as c,r as m,o as p,m as u,F as f,n as b,q as g}from"./index.74f7b770.js";const h=[{title:"用户名",dataIndex:"account",width:120},{title:"昵称",dataIndex:"nickname",width:120},{title:"邮箱",dataIndex:"email",width:120},{title:"创建时间",dataIndex:"createTime",width:180},{title:"角色",dataIndex:"role",width:200},{title:"备注",dataIndex:"remark"}],w=[{field:"account",label:"用户名",component:"Input",colProps:{span:8}},{field:"nickname",label:"昵称",component:"Input",colProps:{span:8}}],I=[{field:"account",label:"用户名",component:"Input",required:!0},{field:"pwd",label:"密码",component:"InputPassword",required:!0,show:!1},{label:"角色",field:"role",component:"ApiSelect",componentProps:{api:i,labelField:"roleName",valueField:"roleValue"},required:!0},{field:"dept",label:"所属部门",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"id"},getPopupContainer:()=>document.body},required:!0},{field:"nickname",label:"昵称",component:"Input",required:!0},{label:"邮箱",field:"email",component:"Input",required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var F=s({name:"AccountModal",components:{BasicModal:t,BasicForm:o},emits:["success","register"],setup(t,{emit:o}){const i=r(!0),[s,{setFieldsValue:m,updateSchema:p,resetFields:u,validate:f}]=n({labelWidth:100,schemas:I,showActionButtonGroup:!1,actionColOptions:{span:23}}),[b,{setModalProps:g,closeModal:h}]=a((async t=>{u(),g({confirmLoading:!1}),i.value=!!(null==t?void 0:t.isUpdate),c(i)&&m(e({},t.record));const a=await l();p([{field:"pwd",show:!c(i)},{field:"dept",componentProps:{treeData:a}}])}));return{registerModal:b,registerForm:s,getTitle:d((()=>c(i)?"编辑账号":"新增账号")),handleSubmit:async function(){try{await f();g({confirmLoading:!0}),h(),o("success")}finally{g({confirmLoading:!1})}}}}});F.render=function(e,t,a,o,n,i){const l=m("BasicForm"),s=m("BasicModal");return p(),u(s,g(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:f((()=>[b(l,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var k=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:F});export{k as A,F as _,h as c,w as s};
