var e=Object.assign;import{_ as o}from"./BasicForm.5cd32a05.js";import{u as t}from"./useForm.27307ca0.js";import{T as a}from"./index.04c03400.js";import{dh as l,aW as n,e as s,v as r,k as i,y as u,r as d,o as p,m as c,F as m,n as b,q as f}from"./index.74f7b770.js";import{_ as v,a as w}from"./useDrawer.e5963a25.js";import{d as h}from"./system.1d84e352.js";const g=[{title:"菜单名称",dataIndex:"menuName",width:200,align:"left"},{title:"图标",dataIndex:"icon",width:50,customRender:({record:e})=>l(n,{icon:e.icon})},{title:"权限标识",dataIndex:"permission",width:180},{title:"组件",dataIndex:"component"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const o=0==~~e.status,t=o?"启用":"停用";return l(a,{color:o?"green":"red"},(()=>t))}},{title:"创建时间",dataIndex:"createTime",width:180}],y=e=>"1"===e,P=e=>"2"===e,I=[{field:"menuName",label:"菜单名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],x=[{field:"type",label:"菜单类型",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"目录",value:"0"},{label:"菜单",value:"1"},{label:"按钮",value:"2"}]},colProps:{lg:24,md:24}},{field:"menuName",label:"菜单名称",component:"Input",required:!0},{field:"parentMenu",label:"上级菜单",component:"TreeSelect",componentProps:{replaceFields:{title:"menuName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"icon",label:"图标",component:"IconPicker",required:!0,show:({values:e})=>!P(e.type)},{field:"routePath",label:"路由地址",component:"Input",required:!0,show:({values:e})=>!P(e.type)},{field:"component",label:"组件路径",component:"Input",show:({values:e})=>y(e.type)},{field:"permission",label:"权限标识",component:"Input",show:({values:e})=>!("0"===e.type)},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"禁用",value:"1"}]}},{field:"isExt",label:"是否外链",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"否",value:"0"},{label:"是",value:"1"}]},show:({values:e})=>!P(e.type)},{field:"keepalive",label:"是否缓存",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"否",value:"0"},{label:"是",value:"1"}]},show:({values:e})=>y(e.type)},{field:"show",label:"是否显示",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"是",value:"0"},{label:"否",value:"1"}]},show:({values:e})=>!P(e.type)}];var B=s({name:"MenuDrawer",components:{BasicDrawer:v,BasicForm:o},emits:["success","register"],setup(o,{emit:a}){const l=r(!0),[n,{resetFields:s,setFieldsValue:d,updateSchema:p,validate:c}]=t({labelWidth:100,schemas:x,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[m,{setDrawerProps:b,closeDrawer:f}]=w((async o=>{s(),b({confirmLoading:!1}),l.value=!!(null==o?void 0:o.isUpdate),u(l)&&d(e({},o.record));const t=await h();p({field:"parentMenu",componentProps:{treeData:t}})}));return{registerDrawer:m,registerForm:n,getTitle:i((()=>u(l)?"编辑菜单":"新增菜单")),handleSubmit:async function(){try{await c();b({confirmLoading:!0}),f(),a("success")}finally{b({confirmLoading:!1})}}}}});B.render=function(e,o,t,a,l,n){const s=d("BasicForm"),r=d("BasicDrawer");return p(),c(r,f(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:m((()=>[b(s,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var F=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:B});export{F as M,B as _,g as c,I as s};
